<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Muæ•™ç¨‹ç³»åˆ—ï¼šGitlab åŸºç¡€ | XiaoMuCOOL ğŸŒ ä¸–ç•Œ</title>
    <meta name="generator" content="VuePress 1.9.10">
    <meta name="description" content="XiaoMuCOOL ğŸŒ ä¸–ç•Œ">
    <link rel="preload" href="/assets/css/0.styles.a82e8a91.css" as="style"><link rel="preload" href="/assets/js/app.d7edd42b.js" as="script"><link rel="preload" href="/assets/js/7.0c792cb6.js" as="script"><link rel="preload" href="/assets/js/30.8529e4e3.js" as="script"><link rel="prefetch" href="/assets/js/1.5a3cb3c1.js"><link rel="prefetch" href="/assets/js/10.36dc0aa9.js"><link rel="prefetch" href="/assets/js/12.dd7cbca7.js"><link rel="prefetch" href="/assets/js/13.8479c985.js"><link rel="prefetch" href="/assets/js/14.a3ee8c08.js"><link rel="prefetch" href="/assets/js/15.b2495e7b.js"><link rel="prefetch" href="/assets/js/16.c36bce32.js"><link rel="prefetch" href="/assets/js/17.bda6029f.js"><link rel="prefetch" href="/assets/js/18.1dd3bbcf.js"><link rel="prefetch" href="/assets/js/19.e241f9da.js"><link rel="prefetch" href="/assets/js/2.50750040.js"><link rel="prefetch" href="/assets/js/20.2bc280fa.js"><link rel="prefetch" href="/assets/js/21.f7c10da1.js"><link rel="prefetch" href="/assets/js/22.96aba0fc.js"><link rel="prefetch" href="/assets/js/23.eb4f581a.js"><link rel="prefetch" href="/assets/js/24.f1fc57a7.js"><link rel="prefetch" href="/assets/js/25.7dbf8c56.js"><link rel="prefetch" href="/assets/js/26.faf5cf63.js"><link rel="prefetch" href="/assets/js/27.fdf5146b.js"><link rel="prefetch" href="/assets/js/28.28742a6e.js"><link rel="prefetch" href="/assets/js/29.1eea5243.js"><link rel="prefetch" href="/assets/js/3.0fe0cad1.js"><link rel="prefetch" href="/assets/js/31.a0f7819c.js"><link rel="prefetch" href="/assets/js/32.3195fd4c.js"><link rel="prefetch" href="/assets/js/33.ffb60c23.js"><link rel="prefetch" href="/assets/js/34.f3c81f28.js"><link rel="prefetch" href="/assets/js/35.783f1c5a.js"><link rel="prefetch" href="/assets/js/36.b052eda4.js"><link rel="prefetch" href="/assets/js/37.c462ed20.js"><link rel="prefetch" href="/assets/js/38.5a33fb8c.js"><link rel="prefetch" href="/assets/js/39.673c193c.js"><link rel="prefetch" href="/assets/js/4.23ee1d84.js"><link rel="prefetch" href="/assets/js/40.d59ae81a.js"><link rel="prefetch" href="/assets/js/41.b196501d.js"><link rel="prefetch" href="/assets/js/5.32ee73c2.js"><link rel="prefetch" href="/assets/js/6.d470119a.js"><link rel="prefetch" href="/assets/js/8.fa6ed9d0.js"><link rel="prefetch" href="/assets/js/9.2b1e9fcf.js">
    <link rel="stylesheet" href="/assets/css/0.styles.a82e8a91.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div id="vuepress-theme-meteorlxy"><header class="header" data-v-484dc084><div data-v-dca6e620 data-v-484dc084><nav class="navbar" data-v-dca6e620><div class="container" data-v-dca6e620><a href="/" class="router-link-active" data-v-dca6e620><span class="navbar-site-name" data-v-dca6e620>
          XiaoMuCOOL ğŸŒ ä¸–ç•Œ
        </span></a> <div class="navbar-toggler" data-v-dca6e620><svg class="icon" style="font-size:1.2em;" data-v-dca6e620 data-v-dca6e620><title data-v-dca6e620 data-v-dca6e620>menu</title><use xlink:href="#icon-menu" data-v-dca6e620 data-v-dca6e620></use></svg></div> <div class="navbar-links" data-v-dca6e620><a href="/" class="navbar-link" data-v-dca6e620>
            ğŸ  é¦–é¡µ
          </a><a href="/posts/" class="navbar-link" data-v-dca6e620>
            ğŸ—‚ï¸ åˆ†ç±»
          </a><a href="/éšç¬”/å¹´åº¦è®¡åˆ’å®‰æ’" class="navbar-link" data-v-dca6e620>
            ğŸ“” éšç¬”
          </a></div></div></nav> <div class="navbar-holder" style="display:none;" data-v-dca6e620></div></div> <div class="banner" data-v-5ad5ee22 data-v-484dc084 data-v-484dc084><div class="container" data-v-5ad5ee22><div class="center" data-v-5ad5ee22><h1 data-v-5ad5ee22 data-v-484dc084>
          Muæ•™ç¨‹ç³»åˆ—ï¼šGitlab åŸºç¡€
        </h1> <h2 data-v-5ad5ee22 data-v-484dc084></h2></div></div></div></header> <div class="container clearfix show-aside" data-v-e8c6d268 data-v-e8c6d268><main class="main" data-v-e8c6d268><div class="post" data-v-e8c6d268 data-v-e8c6d268><section class="post-meta main-div" data-v-1a01be4a><section class="post-date clearfix" data-v-1a01be4a><span class="create-date" data-v-1a01be4a>
      å‘å¸ƒæ—¶é—´ : 2020-01-06
    </span> <span class="update-date" data-v-1a01be4a>
      æœ€åä¿®æ”¹ : 2024-05-23
    </span></section> <section class="post-links" data-v-1a01be4a><a href="/devlop/github-actions.html" class="post-link" data-v-1a01be4a>
      ä¸Šä¸€ç¯‡ : Muæ•™ç¨‹ç³»åˆ—ï¼šGithub Actions åŸºç¡€
    </a> <a href="/devlop/window-terminal.html" class="post-link" data-v-1a01be4a>
      ä¸‹ä¸€ç¯‡ : Muæ•™ç¨‹ç³»åˆ—ï¼šWindows Terminal ç¾åŒ–
    </a></section></section> <article class="main-div"><div class="post-content content content__default"><p>Gitlab ç›¸å…³çš„ä¸€äº›å®‰è£…ã€å‘½ä»¤ã€æ“ä½œè®°å½•ã€‚</p> <h2 id="å®‰è£…-gitlab"><a href="#å®‰è£…-gitlab" class="header-anchor">#</a> å®‰è£… gitlab</h2> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">sudo</span> <span class="token function">apt</span> update               // æ›´æ–°è½¯ä»¶æº
<span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> docker.io <span class="token parameter variable">-y</span> // å®‰è£…docker
<span class="token function">docker</span> pull gitlab/gitlab-ee:latest  // æ‹‰å–é•œåƒ
<span class="token function">docker</span> run <span class="token parameter variable">-d</span>  <span class="token parameter variable">-p</span> <span class="token number">443</span>:443 <span class="token parameter variable">-p</span> <span class="token number">80</span>:80 <span class="token parameter variable">-p</span> <span class="token number">222</span>:22 <span class="token parameter variable">--name</span> gitlab <span class="token parameter variable">--restart</span> always <span class="token parameter variable">-v</span> /home/gitlab/config:/etc/gitlab <span class="token parameter variable">-v</span> /home/gitlab/logs:/var/log/gitlab <span class="token parameter variable">-v</span> /home/gitlab/data:/var/opt/gitlab gitlab/gitlab-ee:latest
</code></pre></div><p>gitlabç»“æœï¼š<code>6e6b93f21e379e40a50a2468025d10d82067d9c0a6635ac0fe1090fc59fd4c4b</code></p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">vim</span> /home/gitlab/config/gitlab.rb
<span class="token comment"># é…ç½®httpåè®®æ‰€ä½¿ç”¨çš„è®¿é—®åœ°å€,ä¸åŠ ç«¯å£å·é»˜è®¤ä¸º80</span>
external_url <span class="token string">'http://47.103.58.85'</span>
<span class="token comment"># é…ç½®sshåè®®æ‰€ä½¿ç”¨çš„è®¿é—®åœ°å€å’Œç«¯å£</span>
gitlab_rails<span class="token punctuation">[</span><span class="token string">'gitlab_ssh_host'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'47.103.58.85'</span>
gitlab_rails<span class="token punctuation">[</span><span class="token string">'gitlab_shell_ssh_port'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">22</span> <span class="token comment"># æ­¤ç«¯å£æ˜¯runæ—¶22ç«¯å£æ˜ å°„çš„22ç«¯å£</span>
<span class="token function">docker</span> restart gitlab
</code></pre></div><p>gitlab ç”¨æˆ·å:root  åˆå§‹å¯†ç ï¼šåœ¨configé‡Œ</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">docker</span> run <span class="token parameter variable">-d</span>  <span class="token parameter variable">-p</span> <span class="token number">443</span>:443 <span class="token parameter variable">-p</span> <span class="token number">80</span>:80 <span class="token parameter variable">-p</span> <span class="token number">222</span>:22 <span class="token parameter variable">--name</span> gitlab-ce <span class="token parameter variable">--restart</span> always <span class="token parameter variable">-v</span> /home/gitlab/config:/etc/gitlab <span class="token parameter variable">-v</span> /home/gitlab/logs:/var/log/gitlab <span class="token parameter variable">-v</span> /home/gitlab/data:/var/opt/gitlab gitlab/gitlab-ce:latest
</code></pre></div><p>ç»“æœï¼š<code>3125c038a09574b76a390dcda2a895b2f2402b7b78b5451891ece17358a1b510</code></p> <h1 id="å¯åŠ¨-é‡å¯-runner"><a href="#å¯åŠ¨-é‡å¯-runner" class="header-anchor">#</a> å¯åŠ¨/é‡å¯ Runner</h1> <div class="language-shell extra-class"><pre class="language-shell"><code> <span class="token function">docker</span> run <span class="token parameter variable">-d</span> <span class="token parameter variable">-p</span> <span class="token number">8093</span>:8093 <span class="token parameter variable">--name</span> gitlab-runner <span class="token parameter variable">--restart</span> always <span class="token punctuation">\</span>
     <span class="token parameter variable">-v</span> /home/gitlab-runner/config:/etc/gitlab-runner <span class="token punctuation">\</span>
     <span class="token parameter variable">-v</span> /var/run/docker.sock:/var/run/docker.sock <span class="token punctuation">\</span>
     gitlab/gitlab-runner:latest
</code></pre></div><p>ç»“æœï¼š<code>bab6921ec13264ab84d364590f7c8bd3a3a969739a044a5abf1e67f249c043ab</code></p> <h3 id="æ³¨å†Œrunner"><a href="#æ³¨å†Œrunner" class="header-anchor">#</a> æ³¨å†Œrunner</h3> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment"># æ‰‹åŠ¨å¡«å†™å‚æ•°</span>
<span class="token function">docker</span> run <span class="token parameter variable">--rm</span> <span class="token parameter variable">-it</span> <span class="token parameter variable">-v</span> /home/gitlab-runner/config:/etc/gitlab-runner gitlab/gitlab-runner register
<span class="token comment"># æˆ–å‘½ä»¤è¡Œé¢„è®¾å‚æ•°</span>
<span class="token function">docker</span>  run <span class="token parameter variable">--rm</span> <span class="token parameter variable">-it</span> gitlab/gitlab-runner register <span class="token parameter variable">-n</span> <span class="token punctuation">\</span>
       <span class="token parameter variable">--url</span> http://47.103.58.85 <span class="token punctuation">\</span>
       --registration-token tsiKxKgEm648JnzaSSMz <span class="token punctuation">\</span>
       --tag-list saas-dev<span class="token punctuation">\</span>
       <span class="token parameter variable">--executor</span> <span class="token function">docker</span> <span class="token punctuation">\</span>
       --docker-image <span class="token function">docker</span> <span class="token punctuation">\</span>
       --docker-volumes /home/gitlab-runner/.m2:/root/.m2 <span class="token punctuation">\</span>
       --docker-volumes /home/gitlab-runner/.npm:/root/.npm <span class="token punctuation">\</span>
       --docker-volumes /home/gitlab-runner/config:/etc/gitlab-runner <span class="token punctuation">\</span>
       --docker-volumes /var/run/docker.sock:/var/run/docker.sock <span class="token punctuation">\</span>
       <span class="token parameter variable">--description</span> <span class="token string">&quot;dockeré•œåƒsaas-prod-elk2æœåŠ¡å™¨&quot;</span>
<span class="token comment"># ä¸Šé¢ä¸¤ä¸ªéƒ½ä¸è¡Œï¼Œè¦è¿›å…¥å®¹å™¨æ³¨å†Œ</span>
<span class="token function">docker</span> <span class="token builtin class-name">exec</span> <span class="token parameter variable">-it</span> gitlab-runner /bin/bash
gitlab-runner register
</code></pre></div><h1 id="è¾£é¸¡runner-é…ç½®è¦å†™æ­»dockerç‰ˆæœ¬-ä¸ç„¶å“­æ­»ä½ "><a href="#è¾£é¸¡runner-é…ç½®è¦å†™æ­»dockerç‰ˆæœ¬-ä¸ç„¶å“­æ­»ä½ " class="header-anchor">#</a> è¾£é¸¡runnerï¼Œé…ç½®è¦å†™æ­»dockerç‰ˆæœ¬ï¼Œä¸ç„¶å“­æ­»ä½ </h1> <p><code>/home/gitlab-runner/config/config.toml</code></p> <div class="language-YML extra-class"><pre class="language-yml"><code>concurrent = 4      <span class="token comment"># å¹¶å‘è¿è¡Œæ•°é‡ï¼Œå»ºè®®è®¾ç½®ä¸ºCPUæ•°é‡</span>
check_interval = 0
<span class="token punctuation">[</span>session_server<span class="token punctuation">]</span>
  session_timeout = 1800
<span class="token punctuation">[</span><span class="token punctuation">[</span>runners<span class="token punctuation">]</span><span class="token punctuation">]</span>
  name = &quot;dockeré•œåƒsaas<span class="token punctuation">-</span>devæœåŠ¡å™¨&quot;
  url = &quot;http<span class="token punctuation">:</span>//47.103.58.85&quot;
  token = &quot;tsiKxKgEm648JnzaSSMz&quot;
  executor = &quot;docker&quot;
  <span class="token punctuation">[</span>runners.custom_build_dir<span class="token punctuation">]</span>
  <span class="token punctuation">[</span>runners.cache<span class="token punctuation">]</span>
    <span class="token punctuation">[</span>runners.cache.s3<span class="token punctuation">]</span>
    <span class="token punctuation">[</span>runners.cache.gcs<span class="token punctuation">]</span>
    <span class="token punctuation">[</span>runners.cache.azure<span class="token punctuation">]</span>
  <span class="token punctuation">[</span>runners.docker<span class="token punctuation">]</span>
    tls_verify = false
    image = &quot;docker<span class="token punctuation">:</span>19.03.12&quot;
    privileged = true
    disable_entrypoint_overwrite = false
    oom_kill_disable = false
    disable_cache = false
    volumes = <span class="token punctuation">[</span><span class="token string">&quot;/var/run/docker.sock:/var/run/docker.sock&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;/cache&quot;</span><span class="token punctuation">]</span>
    shm_size = 0
</code></pre></div><h3 id="éªŒè¯runner"><a href="#éªŒè¯runner" class="header-anchor">#</a> éªŒè¯runner</h3> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">docker</span> run <span class="token parameter variable">--rm</span> <span class="token parameter variable">-it</span> <span class="token parameter variable">-v</span> /home/gitlab-runner/config:/etc/gitlab-runner gitlab/gitlab-runner verify
</code></pre></div><h3 id="æ¸…ç†gitlab-prometheus-ç£ç›˜å ç”¨è¿‡å¤§"><a href="#æ¸…ç†gitlab-prometheus-ç£ç›˜å ç”¨è¿‡å¤§" class="header-anchor">#</a> æ¸…ç†gitlab prometheus ç£ç›˜å ç”¨è¿‡å¤§</h3> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment"># æ¸…ç† docker æ—¥å¿—</span>
<span class="token function">cat</span> /dev/null <span class="token operator">&gt;</span> /var/lib/docker/containers/8bd86f42a9a4ec56bf08718f49cf939ad4fa038ca786deda6ae637f998addb0b/8bd86f42a9a4ec56bf08718f49cf939ad4fa038ca786deda6ae637f998addb0b-json.log
<span class="token comment"># æ¸…ç† gitlab æ—¥å¿—</span>
<span class="token function">docker</span> <span class="token builtin class-name">exec</span> <span class="token parameter variable">-it</span> gitlab /bin/bash
gitlab-ctl stop prometheus
<span class="token function">rm</span> <span class="token parameter variable">-rf</span> /var/opt/gitlab/prometheus/data/*
gitlab-ctl start prometheus
</code></pre></div><h2 id="gitlab-ci-é…ç½®"><a href="#gitlab-ci-é…ç½®" class="header-anchor">#</a> Gitlab-CI é…ç½®</h2> <p><a href="https://docs.gitlab.cn/jh/ci/yaml/index.html" target="_blank" rel="noopener noreferrer">.gitlab-ci.yml<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="language-yml extra-class"><pre class="language-yml"><code><span class="token comment"># é»˜è®¤</span>
<span class="token key atrule">default</span><span class="token punctuation">:</span>
  <span class="token comment"># é»˜è®¤é•œåƒ</span>
  <span class="token key atrule">image</span><span class="token punctuation">:</span> ruby<span class="token punctuation">:</span><span class="token number">3.0</span>
  <span class="token comment"># å¦‚æœè¦å¯åŠ¨è¿è¡Œå‘½ä»¤æˆ–è„šæœ¬</span>
  <span class="token key atrule">image</span><span class="token punctuation">:</span>
    <span class="token comment"># é•œåƒåç§°</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> ruby<span class="token punctuation">:</span><span class="token number">2.6</span>
    <span class="token comment"># å‘½ä»¤æˆ–è„šæœ¬</span>
    <span class="token key atrule">entrypoint</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;/bin/bash&quot;</span><span class="token punctuation">]</span>
  <span class="token comment"># é¢å¤–çš„ Docker é•œåƒæ¥è¿è¡Œè„šæœ¬ã€‚services é•œåƒé“¾æ¥åˆ° image å…³é”®å­—ä¸­æŒ‡å®šçš„é•œåƒ</span>
  <span class="token key atrule">services</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> my<span class="token punctuation">-</span>postgres<span class="token punctuation">:</span><span class="token number">11.7</span>
      <span class="token key atrule">alias</span><span class="token punctuation">:</span> db<span class="token punctuation">-</span>postgres
      <span class="token key atrule">entrypoint</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;/usr/local/bin/db-postgres&quot;</span><span class="token punctuation">]</span>
      <span class="token key atrule">command</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;start&quot;</span><span class="token punctuation">]</span>
<span class="token comment"># é˜¶æ®µ</span>
<span class="token key atrule">stages</span><span class="token punctuation">:</span>
  <span class="token comment"># é˜¶æ®µåç§°</span>
  <span class="token punctuation">-</span> build
  <span class="token punctuation">-</span> test
<span class="token comment"># è‡ªå®šä¹‰å˜é‡</span>
<span class="token key atrule">variables</span><span class="token punctuation">:</span>
  <span class="token comment"># å˜é‡ key: value</span>
  <span class="token key atrule">DEPLOY_VARIABLE</span><span class="token punctuation">:</span> <span class="token string">&quot;default-deploy&quot;</span>
<span class="token comment"># æµæ°´çº¿</span>
<span class="token key atrule">workflow</span><span class="token punctuation">:</span>
  <span class="token comment"># è§„åˆ™</span>
  <span class="token key atrule">rules</span><span class="token punctuation">:</span>
    <span class="token comment"># å…·ä½“è§„åˆ™</span>
    <span class="token punctuation">-</span> <span class="token key atrule">if</span><span class="token punctuation">:</span> <span class="token string">'$CI_PIPELINE_SOURCE == &quot;schedule&quot;'</span>
      <span class="token comment"># å½“ IF ä¸º true æ—¶ï¼Œæ˜¯å¦æ‰§è¡Œæµæ°´çº¿</span>
      <span class="token key atrule">when</span><span class="token punctuation">:</span> never
    <span class="token punctuation">-</span> <span class="token key atrule">if</span><span class="token punctuation">:</span> <span class="token string">'$CI_PIPELINE_SOURCE == &quot;push&quot;'</span>
      <span class="token key atrule">when</span><span class="token punctuation">:</span> never
    <span class="token comment"># é™¤äº†ä¸Šé¢æŒ‡å®šçš„è§„åˆ™æ˜¯ neverï¼Œå…¶ä»–éƒ½æ˜¯ always</span>
    <span class="token punctuation">-</span> <span class="token key atrule">when</span><span class="token punctuation">:</span> always
<span class="token comment"># ä½œä¸š/ä»»åŠ¡</span>
<span class="token key atrule">job1</span><span class="token punctuation">:</span>
  <span class="token comment"># æ‰€å±é˜¶æ®µ</span>
  <span class="token key atrule">stage</span><span class="token punctuation">:</span> build
  <span class="token comment"># é•œåƒ</span>
  <span class="token key atrule">image</span><span class="token punctuation">:</span> ruby<span class="token punctuation">:</span><span class="token number">3</span>
  <span class="token comment"># è§„åˆ™</span>
  <span class="token key atrule">rules</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token key atrule">if</span><span class="token punctuation">:</span> <span class="token string">'$CI_MERGE_REQUEST_SOURCE_BRANCH_NAME =~ /^feature/ &amp;&amp; $CI_MERGE_REQUEST_TARGET_BRANCH_NAME != $CI_DEFAULT_BRANCH'</span>
      <span class="token key atrule">when</span><span class="token punctuation">:</span> never
    <span class="token punctuation">-</span> <span class="token key atrule">if</span><span class="token punctuation">:</span> <span class="token string">'$CI_MERGE_REQUEST_SOURCE_BRANCH_NAME =~ /^feature/'</span>
      <span class="token key atrule">when</span><span class="token punctuation">:</span> manual
      <span class="token key atrule">allow_failure</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
    <span class="token punctuation">-</span> <span class="token key atrule">if</span><span class="token punctuation">:</span> <span class="token string">'$CI_MERGE_REQUEST_SOURCE_BRANCH_NAME'</span>
  <span class="token comment"># æ‰§è¡Œè„šæœ¬</span>
  <span class="token key atrule">script</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> echo &quot;Check the ruby version<span class="token punctuation">,</span> then build some Ruby project files<span class="token punctuation">:</span>&quot;
    <span class="token punctuation">-</span> ruby <span class="token punctuation">-</span>v
    <span class="token punctuation">-</span> rake
<span class="token comment"># ä½œä¸š/ä»»åŠ¡</span>
<span class="token key atrule">job2</span><span class="token punctuation">:</span>
  <span class="token key atrule">stage</span><span class="token punctuation">:</span> test
  <span class="token key atrule">script</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> echo &quot;If the files are built successfully<span class="token punctuation">,</span> test other files with a different command<span class="token punctuation">:</span>&quot;
    <span class="token punctuation">-</span> rake test2
</code></pre></div></div></article> <section class="post-meta main-div" data-v-1a01be4a><section class="post-date clearfix" data-v-1a01be4a><span class="create-date" data-v-1a01be4a>
      å‘å¸ƒæ—¶é—´ : 2020-01-06
    </span> <span class="update-date" data-v-1a01be4a>
      æœ€åä¿®æ”¹ : 2024-05-23
    </span></section> <section class="post-links" data-v-1a01be4a><a href="/devlop/github-actions.html" class="post-link" data-v-1a01be4a>
      ä¸Šä¸€ç¯‡ : Muæ•™ç¨‹ç³»åˆ—ï¼šGithub Actions åŸºç¡€
    </a> <a href="/devlop/window-terminal.html" class="post-link" data-v-1a01be4a>
      ä¸‹ä¸€ç¯‡ : Muæ•™ç¨‹ç³»åˆ—ï¼šWindows Terminal ç¾åŒ–
    </a></section></section> <div id="post-comments" class="main-div"><!----></div></div></main> <aside class="aside" data-v-e8c6d268><div class="info-card main-div" data-v-66e2797a data-v-e8c6d268><div class="info-card-header" data-v-66e2797a><img src="/img/avatar.jpg" alt="å°ç‰§COOL" class="info-avatar" data-v-66e2797a></div> <div class="info-card-body" data-v-66e2797a><section class="info-nickname" data-v-66e2797a>
      å°ç‰§COOL
    </section> <section class="info-desc" data-v-66e2797a>ä»€ä¹ˆï¼Ÿä¸å¥èº«çš„ç¨‹åºå‘˜ä¸æ˜¯ä¸€ä¸ªå¥½çš„åšä¸»ï¼</section> <section class="info-contact" data-v-66e2797a><section data-v-66e2797a><span title="ä¸­å›½-ä¸Šæµ·" data-v-66e2797a data-v-66e2797a><svg class="icon" style="font-size:1em;" data-v-66e2797a data-v-66e2797a><title data-v-66e2797a data-v-66e2797a>ä¸­å›½-ä¸Šæµ·</title><use xlink:href="#icon-location" data-v-66e2797a data-v-66e2797a></use></svg><span class="info-text" data-v-66e2797a data-v-66e2797a>
          ä¸­å›½-ä¸Šæµ·
        </span></span></section> <section data-v-66e2797a><span title="æ»¨æ¸…ç§‘æŠ€.Inc CTO" data-v-66e2797a data-v-66e2797a><svg class="icon" style="font-size:1em;" data-v-66e2797a data-v-66e2797a><title data-v-66e2797a data-v-66e2797a>æ»¨æ¸…ç§‘æŠ€.Inc CTO</title><use xlink:href="#icon-organization" data-v-66e2797a data-v-66e2797a></use></svg><span class="info-text" data-v-66e2797a data-v-66e2797a>
          æ»¨æ¸…ç§‘æŠ€.Inc CTO
        </span></span></section> <section data-v-66e2797a><a href="mailto:xiaomucool@bingblue.com" title="xiaomucool@bingblue.com" data-v-66e2797a data-v-66e2797a><svg class="icon" style="font-size:1em;" data-v-66e2797a data-v-66e2797a><title data-v-66e2797a data-v-66e2797a>xiaomucool@bingblue.com</title><use xlink:href="#icon-email" data-v-66e2797a data-v-66e2797a></use></svg><span class="info-text" data-v-66e2797a data-v-66e2797a>
          xiaomucool@bingblue.com
        </span></a></section></section></div> <div class="info-card-footer" data-v-66e2797a><section class="info-sns clearfix" data-v-66e2797a><a href="https://jq.qq.com/?_wv=1027&amp;k=5tyQDAd" target="_blank" class="sns-link" data-v-66e2797a><span title="QQç¾¤: 215259343" class="sns-icon" data-v-66e2797a data-v-66e2797a><svg class="icon" style="font-size:1.5em;" data-v-66e2797a data-v-66e2797a><title data-v-66e2797a data-v-66e2797a>QQç¾¤: 215259343</title><use xlink:href="#icon-qqgroup" data-v-66e2797a data-v-66e2797a></use></svg></span></a><a href="javascript:;" target="" class="sns-link" data-v-66e2797a><span title="å¾®ä¿¡: xiaomucool" class="sns-icon" data-v-66e2797a data-v-66e2797a><svg class="icon" style="font-size:1.5em;" data-v-66e2797a data-v-66e2797a><title data-v-66e2797a data-v-66e2797a>å¾®ä¿¡: xiaomucool</title><use xlink:href="#icon-wechat" data-v-66e2797a data-v-66e2797a></use></svg></span></a><a href="javascript:;" target="" class="sns-link" data-v-66e2797a><span title="å¾®ä¿¡å…¬ä¼—å·: å°ç‰§çš„æŠ€æœ¯ä¸–ç•Œ" class="sns-icon" data-v-66e2797a data-v-66e2797a><svg class="icon" style="font-size:1.5em;" data-v-66e2797a data-v-66e2797a><title data-v-66e2797a data-v-66e2797a>å¾®ä¿¡å…¬ä¼—å·: å°ç‰§çš„æŠ€æœ¯ä¸–ç•Œ</title><use xlink:href="#icon-gongzhonghao" data-v-66e2797a data-v-66e2797a></use></svg></span></a><a href="https://weibo.com/xiaomucool" target="_blank" class="sns-link" data-v-66e2797a><span title="æ–°æµªå¾®åš: @å°-_-ç‰§" class="sns-icon" data-v-66e2797a data-v-66e2797a><svg class="icon" style="font-size:1.5em;" data-v-66e2797a data-v-66e2797a><title data-v-66e2797a data-v-66e2797a>æ–°æµªå¾®åš: @å°-_-ç‰§</title><use xlink:href="#icon-weibo" data-v-66e2797a data-v-66e2797a></use></svg></span></a><a href="https://www.zhihu.com/people/xiaomucool" target="_blank" class="sns-link" data-v-66e2797a><span title="çŸ¥ä¹: å°ç‰§COOL" class="sns-icon" data-v-66e2797a data-v-66e2797a><svg class="icon" style="font-size:1.5em;" data-v-66e2797a data-v-66e2797a><title data-v-66e2797a data-v-66e2797a>çŸ¥ä¹: å°ç‰§COOL</title><use xlink:href="#icon-zhihu" data-v-66e2797a data-v-66e2797a></use></svg></span></a><a href="https://juejin.cn/user/2400989125279943" target="_blank" class="sns-link" data-v-66e2797a><span title="æ˜é‡‘: å°ç‰§COOL" class="sns-icon" data-v-66e2797a data-v-66e2797a><svg class="icon" style="font-size:1.5em;" data-v-66e2797a data-v-66e2797a><title data-v-66e2797a data-v-66e2797a>æ˜é‡‘: å°ç‰§COOL</title><use xlink:href="#icon-juejin" data-v-66e2797a data-v-66e2797a></use></svg></span></a><a href="https://www.jianshu.com/u/0f8eeb9fe72b" target="_blank" class="sns-link" data-v-66e2797a><span title="ç®€ä¹¦: å°ç‰§COOL" class="sns-icon" data-v-66e2797a data-v-66e2797a><svg class="icon" style="font-size:1.5em;" data-v-66e2797a data-v-66e2797a><title data-v-66e2797a data-v-66e2797a>ç®€ä¹¦: å°ç‰§COOL</title><use xlink:href="#icon-jianshu" data-v-66e2797a data-v-66e2797a></use></svg></span></a><a href="https://segmentfault.com/u/xiaomucool" target="_blank" class="sns-link" data-v-66e2797a><span title="æ€å¦: å°ç‰§COOL" class="sns-icon" data-v-66e2797a data-v-66e2797a><svg class="icon" style="font-size:1.5em;" data-v-66e2797a data-v-66e2797a><title data-v-66e2797a data-v-66e2797a>æ€å¦: å°ç‰§COOL</title><use xlink:href="#icon-sifou" data-v-66e2797a data-v-66e2797a></use></svg></span></a><a href="https://github.com/xiaomucool" target="_blank" class="sns-link" data-v-66e2797a><span title="GitHub: XiaoMuCOOL" class="sns-icon" data-v-66e2797a data-v-66e2797a><svg class="icon" style="font-size:1.5em;" data-v-66e2797a data-v-66e2797a><title data-v-66e2797a data-v-66e2797a>GitHub: XiaoMuCOOL</title><use xlink:href="#icon-github" data-v-66e2797a data-v-66e2797a></use></svg></span></a><a href="https://www.yuque.com/xiaomucool" target="_blank" class="sns-link" data-v-66e2797a><span title="è¯­é›€: å°ç‰§COOL" class="sns-icon" data-v-66e2797a data-v-66e2797a><svg class="icon" style="font-size:1.5em;" data-v-66e2797a data-v-66e2797a><title data-v-66e2797a data-v-66e2797a>è¯­é›€: å°ç‰§COOL</title><use xlink:href="#icon-yuque" data-v-66e2797a data-v-66e2797a></use></svg></span></a><a href="https://www.wolai.com/xiaomucool/" target="_blank" class="sns-link" data-v-66e2797a><span title="æˆ‘æ¥: xiaomucool" class="sns-icon" data-v-66e2797a data-v-66e2797a><svg class="icon" style="font-size:1.5em;" data-v-66e2797a data-v-66e2797a><title data-v-66e2797a data-v-66e2797a>æˆ‘æ¥: xiaomucool</title><use xlink:href="#icon-wolai" data-v-66e2797a data-v-66e2797a></use></svg></span></a><a href="https://blog.csdn.net/a59769507" target="_blank" class="sns-link" data-v-66e2797a><span title="CSDN: å°ç‰§COOL" class="sns-icon" data-v-66e2797a data-v-66e2797a><svg class="icon" style="font-size:1.5em;" data-v-66e2797a data-v-66e2797a><title data-v-66e2797a data-v-66e2797a>CSDN: å°ç‰§COOL</title><use xlink:href="#icon-csdn" data-v-66e2797a data-v-66e2797a></use></svg></span></a></section></div></div> <div class="post-nav-card main-div" style="position:relative;top:0;width:0px;" data-v-e8c6d268><div class="post-nav-contents"><svg class="icon"><title>book</title><use xlink:href="#icon-book"></use></svg> <span>æ–‡ç« ç›®å½•</span> <div class="post-nav-toc"><ul><li><a href="/devlop/gitlab.html#å®‰è£…-gitlab">å®‰è£… gitlab</a><ul><li><a href="/devlop/gitlab.html#æ³¨å†Œrunner">æ³¨å†Œrunner</a></li><li><a href="/devlop/gitlab.html#éªŒè¯runner">éªŒè¯runner</a></li><li><a href="/devlop/gitlab.html#æ¸…ç†gitlab-prometheus-ç£ç›˜å ç”¨è¿‡å¤§">æ¸…ç†gitlab prometheus ç£ç›˜å ç”¨è¿‡å¤§</a></li></ul></li><li><a href="/devlop/gitlab.html#gitlab-ci-é…ç½®">Gitlab-CI é…ç½®</a></li></ul></div></div> <div class="post-nav-comments"><svg class="icon"><title>comment</title><use xlink:href="#icon-comment"></use></svg> <a href="/devlop/gitlab.html#post-comments">
      è¯„è®º
    </a></div></div></aside></div> <footer class="footer" data-v-0068f5f7><p class="footer-sns-links" data-v-0068f5f7><a href="https://jq.qq.com/?_wv=1027&amp;k=5tyQDAd" target="_blank" class="sns-link" data-v-0068f5f7><span title="QQç¾¤: 215259343" class="sns-icon" data-v-0068f5f7 data-v-0068f5f7><svg class="icon" style="font-size:25px;" data-v-0068f5f7 data-v-0068f5f7><title data-v-0068f5f7 data-v-0068f5f7>QQç¾¤: 215259343</title><use xlink:href="#icon-qqgroup" data-v-0068f5f7 data-v-0068f5f7></use></svg></span></a><a href="javascript:;" target="_blank" class="sns-link" data-v-0068f5f7><span title="å¾®ä¿¡: xiaomucool" class="sns-icon" data-v-0068f5f7 data-v-0068f5f7><svg class="icon" style="font-size:25px;" data-v-0068f5f7 data-v-0068f5f7><title data-v-0068f5f7 data-v-0068f5f7>å¾®ä¿¡: xiaomucool</title><use xlink:href="#icon-wechat" data-v-0068f5f7 data-v-0068f5f7></use></svg></span></a><a href="javascript:;" target="_blank" class="sns-link" data-v-0068f5f7><span title="å¾®ä¿¡å…¬ä¼—å·: å°ç‰§çš„æŠ€æœ¯ä¸–ç•Œ" class="sns-icon" data-v-0068f5f7 data-v-0068f5f7><svg class="icon" style="font-size:25px;" data-v-0068f5f7 data-v-0068f5f7><title data-v-0068f5f7 data-v-0068f5f7>å¾®ä¿¡å…¬ä¼—å·: å°ç‰§çš„æŠ€æœ¯ä¸–ç•Œ</title><use xlink:href="#icon-gongzhonghao" data-v-0068f5f7 data-v-0068f5f7></use></svg></span></a><a href="https://weibo.com/xiaomucool" target="_blank" class="sns-link" data-v-0068f5f7><span title="æ–°æµªå¾®åš: @å°-_-ç‰§" class="sns-icon" data-v-0068f5f7 data-v-0068f5f7><svg class="icon" style="font-size:25px;" data-v-0068f5f7 data-v-0068f5f7><title data-v-0068f5f7 data-v-0068f5f7>æ–°æµªå¾®åš: @å°-_-ç‰§</title><use xlink:href="#icon-weibo" data-v-0068f5f7 data-v-0068f5f7></use></svg></span></a><a href="https://www.zhihu.com/people/xiaomucool" target="_blank" class="sns-link" data-v-0068f5f7><span title="çŸ¥ä¹: å°ç‰§COOL" class="sns-icon" data-v-0068f5f7 data-v-0068f5f7><svg class="icon" style="font-size:25px;" data-v-0068f5f7 data-v-0068f5f7><title data-v-0068f5f7 data-v-0068f5f7>çŸ¥ä¹: å°ç‰§COOL</title><use xlink:href="#icon-zhihu" data-v-0068f5f7 data-v-0068f5f7></use></svg></span></a><a href="https://juejin.cn/user/2400989125279943" target="_blank" class="sns-link" data-v-0068f5f7><span title="æ˜é‡‘: å°ç‰§COOL" class="sns-icon" data-v-0068f5f7 data-v-0068f5f7><svg class="icon" style="font-size:25px;" data-v-0068f5f7 data-v-0068f5f7><title data-v-0068f5f7 data-v-0068f5f7>æ˜é‡‘: å°ç‰§COOL</title><use xlink:href="#icon-juejin" data-v-0068f5f7 data-v-0068f5f7></use></svg></span></a><a href="https://www.jianshu.com/u/0f8eeb9fe72b" target="_blank" class="sns-link" data-v-0068f5f7><span title="ç®€ä¹¦: å°ç‰§COOL" class="sns-icon" data-v-0068f5f7 data-v-0068f5f7><svg class="icon" style="font-size:25px;" data-v-0068f5f7 data-v-0068f5f7><title data-v-0068f5f7 data-v-0068f5f7>ç®€ä¹¦: å°ç‰§COOL</title><use xlink:href="#icon-jianshu" data-v-0068f5f7 data-v-0068f5f7></use></svg></span></a><a href="https://segmentfault.com/u/xiaomucool" target="_blank" class="sns-link" data-v-0068f5f7><span title="æ€å¦: å°ç‰§COOL" class="sns-icon" data-v-0068f5f7 data-v-0068f5f7><svg class="icon" style="font-size:25px;" data-v-0068f5f7 data-v-0068f5f7><title data-v-0068f5f7 data-v-0068f5f7>æ€å¦: å°ç‰§COOL</title><use xlink:href="#icon-sifou" data-v-0068f5f7 data-v-0068f5f7></use></svg></span></a><a href="https://github.com/xiaomucool" target="_blank" class="sns-link" data-v-0068f5f7><span title="GitHub: XiaoMuCOOL" class="sns-icon" data-v-0068f5f7 data-v-0068f5f7><svg class="icon" style="font-size:25px;" data-v-0068f5f7 data-v-0068f5f7><title data-v-0068f5f7 data-v-0068f5f7>GitHub: XiaoMuCOOL</title><use xlink:href="#icon-github" data-v-0068f5f7 data-v-0068f5f7></use></svg></span></a><a href="https://www.yuque.com/xiaomucool" target="_blank" class="sns-link" data-v-0068f5f7><span title="è¯­é›€: å°ç‰§COOL" class="sns-icon" data-v-0068f5f7 data-v-0068f5f7><svg class="icon" style="font-size:25px;" data-v-0068f5f7 data-v-0068f5f7><title data-v-0068f5f7 data-v-0068f5f7>è¯­é›€: å°ç‰§COOL</title><use xlink:href="#icon-yuque" data-v-0068f5f7 data-v-0068f5f7></use></svg></span></a><a href="https://www.wolai.com/xiaomucool/" target="_blank" class="sns-link" data-v-0068f5f7><span title="æˆ‘æ¥: xiaomucool" class="sns-icon" data-v-0068f5f7 data-v-0068f5f7><svg class="icon" style="font-size:25px;" data-v-0068f5f7 data-v-0068f5f7><title data-v-0068f5f7 data-v-0068f5f7>æˆ‘æ¥: xiaomucool</title><use xlink:href="#icon-wolai" data-v-0068f5f7 data-v-0068f5f7></use></svg></span></a><a href="https://blog.csdn.net/a59769507" target="_blank" class="sns-link" data-v-0068f5f7><span title="CSDN: å°ç‰§COOL" class="sns-icon" data-v-0068f5f7 data-v-0068f5f7><svg class="icon" style="font-size:25px;" data-v-0068f5f7 data-v-0068f5f7><title data-v-0068f5f7 data-v-0068f5f7>CSDN: å°ç‰§COOL</title><use xlink:href="#icon-csdn" data-v-0068f5f7 data-v-0068f5f7></use></svg></span></a></p> <!----> <p class="footer-text" data-v-0068f5f7>Copyright &copy;2022 & Powered By <a href="https://xiaomucool.com" target="_blank">å°ç‰§COOL</a></p></footer></div><div class="global-ui"><!----><!----></div></div>
    <script src="/assets/js/app.d7edd42b.js" defer></script><script src="/assets/js/7.0c792cb6.js" defer></script><script src="/assets/js/30.8529e4e3.js" defer></script>
  </body>
</html>
